2025-11-10 10:42:58 [Information] Microsoft.Hosting.Lifetime: Now listening on: "http://localhost:5000"
2025-11-10 10:42:58 [Information] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down.
2025-11-10 10:42:58 [Information] Microsoft.Hosting.Lifetime: Hosting environment: "Development"
2025-11-10 10:42:58 [Information] Microsoft.Hosting.Lifetime: Content root path: "/Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api"
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/""" - null null
2025-11-10 10:43:08 [Warning] Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware: Failed to determine the https port for redirect.
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"HTTP: GET /"'
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Http.Result.RedirectResult: Executing RedirectResult, redirecting to "/swagger".
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"HTTP: GET /"'
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/""" - 302 0 null 47.6492ms
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.html""" - null null
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 41.4837ms
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/swagger-ui.css""" - null null
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.css""" - null null
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/swagger-ui-bundle.js""" - null null
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/swagger-ui-standalone-preset.js""" - null null
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.js""" - null null
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 1.5735ms
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/swagger-ui.css""" - 304 null null 4.8488ms
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.css""" - 304 null null 4.6627ms
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/swagger-ui-standalone-preset.js""" - 304 null null 5.5874ms
2025-11-10 10:43:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/swagger-ui-bundle.js""" - 304 null null 9.1272ms
2025-11-10 10:43:09 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/v1/swagger.json""" - null null
2025-11-10 10:43:09 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/favicon-32x32.png""" - null null
2025-11-10 10:43:09 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/favicon-32x32.png""" - 304 null null 0.7755ms
2025-11-10 10:43:09 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 86.8323ms
2025-11-10 10:43:35 [Information] Microsoft.Hosting.Lifetime: Application is shutting down...
2025-11-10 10:57:06 [Information] Microsoft.Hosting.Lifetime: Now listening on: "http://localhost:5000"
2025-11-10 10:57:06 [Information] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down.
2025-11-10 10:57:06 [Information] Microsoft.Hosting.Lifetime: Hosting environment: "Development"
2025-11-10 10:57:06 [Information] Microsoft.Hosting.Lifetime: Content root path: "/Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api"
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Analytics/dashboard""" - null null
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 204 null null 41.8019ms
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:57:57 [Warning] Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware: Failed to determine the https port for redirect.
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:57:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:57:58 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:58 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:58 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:58 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:58 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:58 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:58 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:57:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 699.314ms
2025-11-10 10:57:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:57:58 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:57:58 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:57:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 842.0342ms
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:57:59 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:59 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:59 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:59 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:57:59 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:57:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("42"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 92.5057ms
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:57:59 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:57:59 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:57:59 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 104.8043ms
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:58:28 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:28 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:28 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:28 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:28 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:28 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:28 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 151.8421ms
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:28 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:58:28 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:58:28 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 202.1061ms
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:58:29 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:29 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:29 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:58:29 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:29 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:29 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:29 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("14"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 30.5217ms
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:29 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:58:29 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:58:29 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 34.0207ms
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Order""" - null null
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Order""" - 204 null null 0.6875ms
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 10:58:30 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 98.1414ms
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 10:58:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 106.9495ms
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 10:58:33 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 28.9672ms
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 10:58:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 37.1666ms
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:58:37 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:37 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:58:37 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:37 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 10:58:37 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:37 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:37 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:37 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 27.7805ms
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:37 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:58:37 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:58:37 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 30.9126ms
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 10:58:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 28.0738ms
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 10:58:39 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 34.6232ms
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:58:48 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:48 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:48 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:48 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:48 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:48 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:48 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 41.838ms
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:48 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:58:48 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:58:48 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 62.0012ms
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 10:58:49 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:49 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:49 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:49 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 10:58:49 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:49 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 10:58:49 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 30.6648ms
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 10:58:49 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 10:58:49 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 10:58:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 33.71ms
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:01:44 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:01:44 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:44 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:44 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:44 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:01:44 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:44 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 83.1811ms
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:01:44 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:01:44 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:01:44 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 181.6085ms
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:01:45 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:45 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:45 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:45 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:45 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:01:45 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:01:45 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 36.9706ms
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:01:45 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:01:45 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:01:45 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 59.0625ms
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:02:18 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:18 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:18 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:18 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:18 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:18 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:18 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("97"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 183.2324ms
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:02:18 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:02:18 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:02:18 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 255.5031ms
2025-11-10 11:02:19 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:02:19 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:19 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:02:19 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:02:19 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:19 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:20 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:20 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:02:20 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:20 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:02:20 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 11:02:20 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 19.7013ms
2025-11-10 11:02:20 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:02:20 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:02:20 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:02:20 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 25.1967ms
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Product""" - null null
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Product""" - 204 null null 1.279ms
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Brand""" - null null
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Brand""" - 204 null null 0.4087ms
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - "application/json" null
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProducts\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Product]]] GetProducts()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 11:02:22 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 30.2517ms
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 41.5517ms
2025-11-10 11:02:22 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.brand_id, p.created_at, p.description, p.image_url, p.is_deleted, p.name, p.price, p.stock_quantity, p.updated_at
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Product, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProducts (Api)" in 66.7317ms
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 11:02:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - 200 null "application/json; charset=utf-8" 80.8203ms
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 11:02:30 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 29.5053ms
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:02:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 31.8459ms
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Role""" - null null
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/User""" - null null
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Role""" - 204 null null 31.3315ms
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/User""" - 204 null null 30.6566ms
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:03:25 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 122.1821ms
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 240.8626ms
2025-11-10 11:03:25 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 147.7411ms
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 259.314ms
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:03:28 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:03:28 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 30.0167ms
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 29.7153ms
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 59.2997ms
2025-11-10 11:03:28 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 59.3193ms
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:03:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:03:30 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:03:30 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 32.8175ms
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 32.9788ms
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 44.1485ms
2025-11-10 11:03:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 44.1755ms
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:03:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:03:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 51.6642ms
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 51.5099ms
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 90.8896ms
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:03:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 91.2095ms
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:04:47 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:04:47 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 24.7747ms
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 24.4591ms
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 32.904ms
2025-11-10 11:04:47 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 32.886ms
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 11:04:48 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 12.9204ms
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:04:48 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 14.4653ms
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 11:05:29 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("51"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 106.0923ms
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:05:29 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 123.7137ms
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 11:05:31 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 57.2041ms
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 75.0396ms
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 11:05:31 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 14.8026ms
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:05:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 16.4796ms
2025-11-10 11:05:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Material""" - null null
2025-11-10 11:05:42 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Material""" - 204 null null 4.469ms
2025-11-10 11:05:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Material""" - "application/json" null
2025-11-10 11:05:42 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.MaterialController.GetMaterials (Api)"'
2025-11-10 11:05:43 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetMaterials\", controller = \"Material\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Material]]] GetMaterials()" on controller "Api.Controllers.MaterialController" ("Api").
2025-11-10 11:05:43 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT m.id, m.created_at, m.is_deleted, m.name, m.updated_at
FROM materials AS m
WHERE NOT (m.is_deleted)"
2025-11-10 11:05:43 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Material, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:05:43 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.MaterialController.GetMaterials (Api)" in 357.8245ms
2025-11-10 11:05:43 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.MaterialController.GetMaterials (Api)"'
2025-11-10 11:05:43 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Material""" - 200 null "application/json; charset=utf-8" 413.1081ms
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/OrderStatus""" - null null
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/OrderStatus""" - 204 null null 2.5045ms
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/OrderStatus""" - "application/json" null
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderStatusController.GetOrderStatuses (Api)"'
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrderStatuses\", controller = \"OrderStatus\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.OrderStatus]]] GetOrderStatuses()" on controller "Api.Controllers.OrderStatusController" ("Api").
2025-11-10 11:05:53 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.created_at, o.name
FROM order_statuses AS o"
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.OrderStatus, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderStatusController.GetOrderStatuses (Api)" in 66.342ms
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderStatusController.GetOrderStatuses (Api)"'
2025-11-10 11:05:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/OrderStatus""" - 200 null "application/json; charset=utf-8" 116.2622ms
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/PaymentStatus""" - null null
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/PaymentStatus""" - 204 null null 4.1673ms
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/PaymentStatus""" - "application/json" null
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.PaymentStatusController.GetPaymentStatuses (Api)"'
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetPaymentStatuses\", controller = \"PaymentStatus\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.PaymentStatus]]] GetPaymentStatuses()" on controller "Api.Controllers.PaymentStatusController" ("Api").
2025-11-10 11:06:08 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.created_at, p.name
FROM payment_statuses AS p"
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.PaymentStatus, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.PaymentStatusController.GetPaymentStatuses (Api)" in 118.6533ms
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.PaymentStatusController.GetPaymentStatuses (Api)"'
2025-11-10 11:06:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/PaymentStatus""" - 200 null "application/json; charset=utf-8" 208.0238ms
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/DeliveredOrder""" - null null
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/DeliveredOrder""" - 204 null null 3.0235ms
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/DeliveredOrder""" - "application/json" null
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.DeliveredOrderController.GetDeliveredOrders (Api)"'
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDeliveredOrders\", controller = \"DeliveredOrder\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.DeliveredOrder]]] GetDeliveredOrders()" on controller "Api.Controllers.DeliveredOrderController" ("Api").
2025-11-10 11:06:10 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT d.order_id, d.courier_name, d.delivery_date
FROM delivered_orders AS d"
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.DeliveredOrder, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.DeliveredOrderController.GetDeliveredOrders (Api)" in 24.415ms
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.DeliveredOrderController.GetDeliveredOrders (Api)"'
2025-11-10 11:06:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/DeliveredOrder""" - 200 null "application/json; charset=utf-8" 33.1339ms
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:06:12 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:12 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:06:12 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:12 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:12 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:12 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:12 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 25.4ms
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:12 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:06:12 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:06:12 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 35.0099ms
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:06:13 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:13 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:13 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:13 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:06:13 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:13 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:13 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("18"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 26.7406ms
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:13 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:06:13 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:06:13 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 29.3269ms
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:06:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 6.3421ms
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:15 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:06:15 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:06:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 11.4658ms
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:06:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:16 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:06:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 10.1947ms
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:06:16 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:06:16 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:06:16 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 15.533ms
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - "application/json" null
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProducts\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Product]]] GetProducts()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 11:06:17 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 13.1487ms
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 13.9946ms
2025-11-10 11:06:17 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.brand_id, p.created_at, p.description, p.image_url, p.is_deleted, p.name, p.price, p.stock_quantity, p.updated_at
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Product, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProducts (Api)" in 21.0596ms
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 11:06:17 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - 200 null "application/json; charset=utf-8" 23.222ms
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 11:06:21 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 14.593ms
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:06:21 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 17.3747ms
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:06:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:06:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 13.6916ms
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 14.0623ms
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 17.3269ms
2025-11-10 11:06:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 16.5933ms
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:06:57 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:06:57 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 25.6614ms
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 34.2442ms
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 26.4587ms
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:06:57 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 34.3979ms
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 11:07:33 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 34.1085ms
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 11:07:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 47.0057ms
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:08:22 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:22 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:22 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:22 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:22 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:22 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:22 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 38.4086ms
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:08:22 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:08:22 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:08:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 47.1318ms
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 11:08:23 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:23 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 11:08:23 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:23 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:23 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 11:08:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 15.2675ms
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 11:08:23 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 11:08:23 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 11:08:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 19.8637ms
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 11:08:25 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 8.9493ms
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 10.3167ms
2025-11-10 11:08:25 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 25.364ms
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 11:08:25 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 26.1536ms
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:10:05 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 223.2997ms
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:10:05 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 329.7574ms
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:11:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("70"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 78.1122ms
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:11:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 82.3589ms
2025-11-10 12:11:54 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:11:54 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:11:54 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:11:55 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:11:55 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:11:55 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 31.5092ms
2025-11-10 12:11:55 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:11:55 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 36.6067ms
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:12:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("49"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 62.923ms
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:12:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 71.185ms
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:13:00 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 38.0073ms
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:13:00 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 43.3002ms
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:13:44 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 23.2432ms
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:13:44 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 27.6708ms
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:17:12 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 75.2066ms
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:17:12 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 82.539ms
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:17:33 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 22.6497ms
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:17:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 25.6138ms
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:17:53 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 28.3261ms
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:17:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 37.1957ms
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 12:18:03 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 28.3065ms
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 12:18:03 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 36.7916ms
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:18:32 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:32 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:32 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:32 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:18:32 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:32 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:32 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 52.3071ms
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:32 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 12:18:32 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 12:18:32 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 76.5577ms
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 12.1359ms
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:33 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 12:18:33 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 16.5301ms
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:33 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 16.0933ms
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:33 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 12:18:33 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 12:18:33 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 18.3205ms
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:18:34 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:34 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:34 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:34 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:34 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:34 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:18:34 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 9.4004ms
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:18:34 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 12:18:34 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 12:18:34 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 29.1168ms
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 12:18:36 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 33.4798ms
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 12:18:36 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 43.2179ms
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 12:18:38 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 33.7965ms
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 36.4342ms
2025-11-10 12:18:38 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 61.4906ms
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:18:38 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 63.7256ms
2025-11-10 12:18:51 [Information] Microsoft.Hosting.Lifetime: Application is shutting down...
2025-11-10 12:19:03 [Information] Microsoft.Hosting.Lifetime: Now listening on: "http://localhost:5000"
2025-11-10 12:19:03 [Information] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down.
2025-11-10 12:19:03 [Information] Microsoft.Hosting.Lifetime: Hosting environment: "Development"
2025-11-10 12:19:03 [Information] Microsoft.Hosting.Lifetime: Content root path: "/Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api"
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:19:08 [Warning] Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware: Failed to determine the https port for redirect.
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 12:19:08 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 12:19:08 [Information] Api.Controllers.UserController: Fetching active users
2025-11-10 12:19:09 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:19:09 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 12:19:09 [Information] Api.Controllers.UserController: Returning 5 users
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 768.8717ms
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 768.7986ms
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 846.2481ms
2025-11-10 12:19:09 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 846.2591ms
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 12:20:24 [Information] Api.Controllers.UserController: Fetching active users
2025-11-10 12:20:24 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:20:24 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 12:20:24 [Information] Api.Controllers.UserController: Returning 5 users
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 70.2202ms
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 70.4751ms
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 93.0694ms
2025-11-10 12:20:24 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 93.0533ms
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 12:32:53 [Information] Api.Controllers.UserController: Fetching active users
2025-11-10 12:32:53 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:32:53 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 12:32:53 [Information] Api.Controllers.UserController: Returning 5 users
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 44.8838ms
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 44.9397ms
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 53.4982ms
2025-11-10 12:32:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 53.5027ms
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - "application/json" null
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - "application/json" null
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetRoles\", controller = \"Role\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Role]]] GetRoles()" on controller "Api.Controllers.RoleController" ("Api").
2025-11-10 12:33:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetUsers\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Api.DTOs.UserDto]]] GetUsers()" on controller "Api.Controllers.UserController" ("Api").
2025-11-10 12:33:11 [Information] Api.Controllers.UserController: Fetching active users
2025-11-10 12:33:12 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.created_at, r.name
FROM roles AS r"
2025-11-10 12:33:12 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.creation_datetime, u.email, u.full_name, u.is_archived, u.is_deleted, u.last_login_at, u.login, u.password, u.phone, u.role_id, u.update_datetime
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:33:12 [Information] Api.Controllers.UserController: Returning 5 users
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Role, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.DTOs.UserDto, Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.RoleController.GetRoles (Api)" in 41.8286ms
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.RoleController.GetRoles (Api)"'
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.UserController.GetUsers (Api)" in 42.2267ms
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.UserController.GetUsers (Api)"'
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Role""" - 200 null "application/json; charset=utf-8" 52.797ms
2025-11-10 12:33:12 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/User""" - 200 null "application/json; charset=utf-8" 59.2168ms
2025-11-10 12:33:14 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:33:14 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:33:14 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:33:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:33:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:33:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:33:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:15 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("18"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 12:33:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 127.361ms
2025-11-10 12:33:15 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:33:15 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 12:33:15 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method209(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 12:33:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 201.8183ms
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:33:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:16 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:33:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:16 [Error] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type '"Data.ShopDb.AppDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-10 12:33:16 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 15.6992ms
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:33:16 [Error] : Ошибка запроса "/api/Analytics/dashboard": "A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913."
2025-11-10 12:33:16 [Error] : Exception stack trace: "System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Api.Controllers.AnalyticsController.GetDashboard() in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Controllers/AnalyticsController.cs:line 60
   at lambda_method209(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Api.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api/Middlewares/ExceptionMiddleware.cs:line 15"
2025-11-10 12:33:16 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 500 null "application/json; charset=utf-8" 20.412ms
2025-11-10 12:51:53 [Information] Microsoft.Hosting.Lifetime: Application is shutting down...
2025-11-10 12:51:59 [Information] Microsoft.Hosting.Lifetime: Now listening on: "http://localhost:5000"
2025-11-10 12:51:59 [Information] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down.
2025-11-10 12:51:59 [Information] Microsoft.Hosting.Lifetime: Hosting environment: "Development"
2025-11-10 12:51:59 [Information] Microsoft.Hosting.Lifetime: Content root path: "/Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api"
2025-11-10 12:52:05 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 12:52:05 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 12:52:05 [Warning] Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware: Failed to determine the https port for redirect.
2025-11-10 12:52:05 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:52:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 12:52:05 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 12:52:05 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 12:52:05 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 12:52:05 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 12:52:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 12:52:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 12:52:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 864.549ms
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 921.1551ms
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.html""" - null null
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 29.871ms
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/v1/swagger.json""" - null null
2025-11-10 12:52:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 91.6956ms
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 13:02:42 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 141.6619ms
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:02:42 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 183.9709ms
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:02:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 113.7053ms
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:02:46 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 137.2735ms
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:10:41 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 56.9867ms
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:10:41 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 69.021ms
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:10:48 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 29.3625ms
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:10:48 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 36.2585ms
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:10:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 14.809ms
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:10:52 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 17.1648ms
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:11:36 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 19.3425ms
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:11:36 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 24.6825ms
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Analytics/dashboard""" - null null
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 204 null null 37.2321ms
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 13:12:15 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 86.0523ms
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:12:15 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 93.077ms
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Brand""" - null null
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Product""" - null null
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Brand""" - 204 null null 6.0868ms
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Product""" - 204 null null 6.0928ms
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - "application/json" null
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProducts\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Product]]] GetProducts()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:12:27 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.brand_id, p.created_at, p.description, p.image_url, p.is_deleted, p.name, p.price, p.stock_quantity, p.updated_at
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:12:27 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Product, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 162.2038ms
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 189.0377ms
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProducts (Api)" in 162.6099ms
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 13:12:27 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - 200 null "application/json; charset=utf-8" 189.6609ms
2025-11-10 13:18:51 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 13:18:51 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:18:51 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:18:51 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 13:18:52 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 13:18:52 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 13:18:52 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 122.5226ms
2025-11-10 13:18:52 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:18:52 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 129.1806ms
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - "application/json" null
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProducts\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Product]]] GetProducts()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 13:18:58 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.brand_id, p.created_at, p.description, p.image_url, p.is_deleted, p.name, p.price, p.stock_quantity, p.updated_at
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Product, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProducts (Api)" in 26.2578ms
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - 200 null "application/json; charset=utf-8" 35.0686ms
2025-11-10 13:18:58 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 49.9032ms
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 13:18:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 58.4012ms
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:19:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:19:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 27.9106ms
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 28.4722ms
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 33.8357ms
2025-11-10 13:19:02 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 32.5907ms
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:19:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 20.6376ms
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:19:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 31.1073ms
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Analytics/dashboard""" - null null
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 204 null null 47.4452ms
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 13:20:40 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 59.6872ms
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:20:40 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 67.6497ms
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 13:20:51 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 35.5938ms
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:20:51 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 45.096ms
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 13:21:39 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 42.7553ms
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 13:21:39 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 51.4795ms
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:23:11 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 13.9964ms
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:23:11 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 21.8881ms
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:23:21 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 7.9926ms
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:23:21 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 9.9989ms
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:27:23 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 64.8436ms
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:27:23 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 71.943ms
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:27:26 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 9.2336ms
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:27:26 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 10.5293ms
2025-11-10 13:27:53 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:27:53 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:27:53 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:27:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:27:54 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:27:54 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 19.5498ms
2025-11-10 13:27:54 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:27:54 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 22.7955ms
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 13:28:05 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 30.285ms
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 13:28:05 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 35.3433ms
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 14:00:54 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 148.3676ms
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 14:00:54 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 198.0512ms
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("21"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 14:01:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 131.662ms
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 14:01:59 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 188.728ms
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:02:41 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 94.9528ms
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:02:41 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 115.6796ms
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:02:50 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 23.4933ms
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:02:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 33.9772ms
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:03:04 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 19.1296ms
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:03:04 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 22.9559ms
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:03:45 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 24.4415ms
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:03:45 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 32.2473ms
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:04:10 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 25.8376ms
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:04:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 31.5062ms
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:04:13 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 9.488ms
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:04:13 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 11.3525ms
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:05:11 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 21.5267ms
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:05:11 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 30.277ms
2025-11-10 14:42:16 [Information] Microsoft.Hosting.Lifetime: Application is shutting down...
2025-11-10 14:42:23 [Information] Microsoft.Hosting.Lifetime: Now listening on: "http://localhost:5000"
2025-11-10 14:42:23 [Information] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down.
2025-11-10 14:42:23 [Information] Microsoft.Hosting.Lifetime: Hosting environment: "Development"
2025-11-10 14:42:23 [Information] Microsoft.Hosting.Lifetime: Content root path: "/Users/notpineapples/Desktop/MPT/FourthCourseWork/second-cursework/backend/api/src/Api"
2025-11-10 14:44:30 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:44:30 [Warning] Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware: Failed to determine the https port for redirect.
2025-11-10 14:44:30 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:44:30 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:44:31 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:44:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:44:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 718.488ms
2025-11-10 14:44:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:44:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 813.1001ms
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:44:38 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 32.7348ms
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:44:38 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 45.4882ms
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:46:01 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 76.0456ms
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:46:01 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 98.6411ms
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 14:46:06 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 271.7456ms
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 14:46:06 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 324.1327ms
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:46:20 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 18.0321ms
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:46:20 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 21.4697ms
2025-11-10 14:53:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:53:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:53:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:53:58 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:53:58 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:53:58 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:53:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:53:59 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 143.5688ms
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 144.832ms
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 147.1954ms
2025-11-10 14:53:59 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 168.0642ms
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:54:22 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:54:22 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 49.6135ms
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 48.9895ms
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 60.807ms
2025-11-10 14:54:22 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 60.8065ms
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:57:31 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 78.1859ms
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:57:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 100.2778ms
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:57:37 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 19.8609ms
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:57:37 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 24.9202ms
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:58:04 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 28.5177ms
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:58:04 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 35.1104ms
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:58:10 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 22.743ms
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:58:10 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 27.5816ms
2025-11-10 14:59:31 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:59:31 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:59:31 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:59:32 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:59:32 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:59:32 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 72.8493ms
2025-11-10 14:59:32 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:59:32 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 79.6526ms
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 14:59:45 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 14.1661ms
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 14:59:45 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 19.976ms
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 15:00:02 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 116.2404ms
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 15:00:02 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 146.0756ms
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - "application/json" null
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProductCatalog\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.ProductInventoryView]]] GetProductCatalog()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 15:00:37 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT v.brand_name, v.description, v.id, v.image_url, v.materials, v.name, v.price, v.stock_quantity
FROM v_product_inventory AS v"
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.ProductInventoryView, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProductCatalog (Api)" in 12.9917ms
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProductCatalog (Api)"'
2025-11-10 15:00:37 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product/catalog""" - 200 null "application/json; charset=utf-8" 16.56ms
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - "application/json" null
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetDashboard\", controller = \"Analytics\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Api.DTOs.AnalyticsDashboardDto]] GetDashboard()" on controller "Api.Controllers.AnalyticsController" ("Api").
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM users AS u
WHERE NOT (u.is_deleted)"
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(o.total_amount), 0.0)
FROM orders AS o
WHERE NOT (o.is_deleted)"
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("8"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT o0.id AS \"Id\", u.login AS \"Customer\", o1.name AS \"OrderStatus\", p.name AS \"PaymentStatus\", o0.order_date AS \"OrderDate\"
FROM (
    SELECT o.id, o.order_date, o.order_status_id, o.payment_status_id, o.user_id
    FROM orders AS o
    WHERE NOT (o.is_deleted)
    ORDER BY o.order_date DESC
    LIMIT @__p_0
) AS o0
INNER JOIN users AS u ON o0.user_id = u.id
INNER JOIN order_statuses AS o1 ON o0.order_status_id = o1.id
INNER JOIN payment_statuses AS p ON o0.payment_status_id = p.id
ORDER BY o0.order_date DESC"
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.id AS \"Id\", v.name AS \"Name\", v.brand_name AS \"Brand\", v.stock_quantity AS \"StockQuantity\"
FROM v_product_inventory AS v
WHERE v.stock_quantity < 10
ORDER BY v.stock_quantity
LIMIT @__p_0"
2025-11-10 15:00:46 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT v.email, v.last_order_at, v.login, v.total_orders, v.total_spent, v.user_id
FROM v_user_orders_summary AS v
ORDER BY v.total_spent DESC
LIMIT @__p_0"
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"Api.DTOs.AnalyticsDashboardDto"'.
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.AnalyticsController.GetDashboard (Api)" in 54.234ms
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.AnalyticsController.GetDashboard (Api)"'
2025-11-10 15:00:46 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Analytics/dashboard""" - 200 null "application/json; charset=utf-8" 63.8482ms
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Brand""" - null null
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Product""" - null null
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Brand""" - 204 null null 15.8686ms
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Product""" - 204 null null 15.7353ms
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - "application/json" null
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - "application/json" null
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetBrands\", controller = \"Brand\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Brand]]] GetBrands()" on controller "Api.Controllers.BrandController" ("Api").
2025-11-10 15:00:49 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetProducts\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Product]]] GetProducts()" on controller "Api.Controllers.ProductController" ("Api").
2025-11-10 15:00:50 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT b.id, b.created_at, b.is_deleted, b.name
FROM brands AS b
WHERE NOT (b.is_deleted)"
2025-11-10 15:00:50 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.brand_id, p.created_at, p.description, p.image_url, p.is_deleted, p.name, p.price, p.stock_quantity, p.updated_at
FROM products AS p
WHERE NOT (p.is_deleted)"
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Brand, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Product, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.BrandController.GetBrands (Api)" in 153.3663ms
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.ProductController.GetProducts (Api)" in 153.2756ms
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.BrandController.GetBrands (Api)"'
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.ProductController.GetProducts (Api)"'
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Brand""" - 200 null "application/json; charset=utf-8" 185.4102ms
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Product""" - 200 null "application/json; charset=utf-8" 185.4253ms
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Order""" - null null
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5000""""/api/Order""" - 204 null null 0.4145ms
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - "application/json" null
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with "{action = \"GetOrders\", controller = \"Order\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Models.ShopDb.Order]]] GetOrders()" on controller "Api.Controllers.OrderController" ("Api").
2025-11-10 15:00:50 [Information] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT o.id, o.delivery_address, o.is_deleted, o.order_date, o.order_status_id, o.payment_method, o.payment_status_id, o.total_amount, o.user_id
FROM orders AS o"
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing "ObjectResult", writing value of type '"System.Collections.Generic.List`1[[Models.ShopDb.Order, Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action "Api.Controllers.OrderController.GetOrders (Api)" in 49.103ms
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint '"Api.Controllers.OrderController.GetOrders (Api)"'
2025-11-10 15:00:50 [Information] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished "HTTP/1.1" "GET" "http"://"localhost:5000""""/api/Order""" - 200 null "application/json; charset=utf-8" 62.6457ms
2025-11-10 15:01:38 [Information] Microsoft.Hosting.Lifetime: Application is shutting down...
